## 字符串之间的转换
c++常用的几个种字符串：char*, string, cstring之间的转换
### char*与string
#### char\*转string   
char\*可以直接复制给string  
```c
const char* x= "hello";   
const char y[]= "world";  
string z;    
//都可以直接赋值   
z= x;   
z= y;   
```   
#### string转char\*   
**第一种方式：**  
```c
string str= "abc";   
char* q= str.c_str();//1，不安全   
char r[256];       
strcpy(r, str.c_str());//2，标准做法    
```    
值得注意的是，string的c_str()函数返回的是一个const char\*的临时指针。  
如果按照1的做法，是非常不安全的，因为指针q指向的是一个临时指针，之后如果string的值改变了，那么指针q就变成了野指针。   
正确的做法是2，我们将临时指针c_str()写到一个char的数组之中。   
strcpy是C语言标准库函数，把从来源地址开始且**含有'\0'结束符**的字符串复制到目标地址空间。   
**第二种方式：**   
```c   
string str= "abc";    
char* p= str.data();//1，不安全   
char r[256];       
strcpy(r, str.c_str());//2，标准做法        
```   
string的c_str()和data()函数相类似，他们都返回const char\*的临时指针。  
他们的区别在于：   
1 data()的效率高于c_str()。   
2 c_str()返回的指针必定带有'\0'结尾，而data()返回的指针**不一定**带有'\0'结尾。   
所以比较常用的还是c_str()函数，而只有当我们比较需要高效率且不在意结尾是不是'\0'的时候可以用data()。   
**第三种方式：**   
```c   
char r[20];   
str.copy(r, 3, 0);//3代表复制的数量，0代表起始位置  
*(p+3)= '\0\;   
```   
### CString与char*   
#### CString转char*   
```c
CString strSource;   
char* charSource;   
//1   
charSource= (char*)strSource.GetBuffer(0);   
//2  
charSource= (char*)strSource.GetBuffer(strSource.GetLength());   
//3   
charSource= (char*)(LPCTSTR)strSource;   
```   
CString类中的GetBuffer()函数返回一个可写入缓冲为LPTSTR的指针。这个指针通过强转可以直接赋值给char\*指针。   