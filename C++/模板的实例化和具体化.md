# 模板的实例化和具体化
## 模板的实例化
在代码中，包含函数模板本身并不会生成函数定义，它只是一个用于生成函数定义的方案。   
但是模板本身会以参数来隐式或显示的生成相对应的函数定义，这称为模板的实例化。   
### 模板的隐式实例化
当编译器使用模板为特定类型生成函数定义时，得到的是模板实例。   
比如：  
```c
tempalte<typename T> void Swap(T& a, T& b)  
{   
	T temp= a;  
	a= b;  
	b= temp;   
}   

int a=2;   
int b=3;   
Swap(a,b);   
```   
Swap(a,b)这行代码，将会导致编译器生成一个Swap函数的实例，该实例使用int类型。   
模板并非函数定义，但是使用int的模板实例是函数定义。    
这种实例方式就被称为隐式实例化，因为编译器之所以知道需要进行定义，是由于程序调用Swap函数时提供了int类型的参数。   
### 模板的显示实例化
最初，编译器只能通过隐式实例化来使用模板生成函数定义。但是现在c++还允许显式实例化。这意味着可以直接命令编译器创建特定的实例。   
其语法是，声明所需的种类——用<>符号指示类型，并在声明前加上关键字template：   
```c
template void Swap<int>(int,int);   
```  
另外，也可以在函数调用的时候进行显式实例化：   
```c
Swap<double>(a,b);   
```  
> 实际操作过程中遇到了“当前范围内不允许显示实例化”，暂时未找到解决方法。   
## 模板的具体化
假设当我们使用模板函数的时候，有了不同的需求，比如同样是Swap函数，原本的定义如下：  
```c
template<typename T>  
void Pswap(T& a, T& b)   
{   
	T temp = a;  
	a = b;  
	b = temp;   
}     
```    
现在我们有一个结构：  
```c
struct job  
{   
	job(string str, int num) : jobname(str), age(num) { }   
	string jobname;   
	int age;  
};    
```    
里面包含职业名称和年龄两个变量，我们希望Swap匹配这个结构的时候，不要交换里面全部的jobname和age，只要交换jobname而保留age（不要问什么，只是做个比方，一个只想交换一半内容的特殊需求）。  
那么我们就无法使用之前那个模板了，如果仅仅单纯的使用模板，将会交换整体的jobname和age，不符合这个特殊的需求。   
这个时候我们会想到重载，但是由于我们并不会增加参数的数量，无法重载模板。   
这个时候，c++提供了一个具体化函数定义——称为显示具体化，即模板的显示具体化。   
当编译器找到与函数调用匹配的具体化定义时，将使用该定义，而不再寻找模板。   
方法如下：  
```c
//普通的模板方案   
template<typename T>   
void Pswap(T& a, T& b)    
{   
	T temp = a;  
	a = b;   
	b = temp;   
}     

//具体化模板定义，这个需要定义在普通模板方案后面      
template <> void Pswap<job>(job& a, job& b)    
{   
	string temp = a.jobname;    
	a.jobname = b.jobname;   
	b.jobname = temp;   
}     

//具体化模板还有个简单版本，即省略<job>  
template <> void Pswap(job& a, job& b)     
{...}   
```   
## 注意事项  
1 对于给定的函数名，可以有非模板函数、函数模板和显示具体化模板函数以及他们的重载版。   
2 显示具体化的原型和定义应以template<>打头，并通过名成来指出类型。   
3 具体化优先于常规模板，非模板函数优先于具体化和常规模板。   
4 试图在同一个文件中使用同一种类型的显式实例和显示具体化将会出错。  
5 隐式实例化、显式实例化和显示具体化统称为具体化（specialization）。他们的相同之处在于，它们表示的都时使用具体类型的函数定义，而不是通用描述。   
## 总结
尽管在看书的时候，总结归纳出了这篇博客，但是由于实际操作的时候出现了问题，且尚未在搜索引擎找到答案。  
只能说这是一篇不完整的博客，但是它也是将我引入进一步模板学习的一个引子。   
待完善。   