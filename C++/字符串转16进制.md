## 字符串转16进制
工作中往数据库插入中文的时候遇到一个问题，汉字会被转码成乱码，只能转成16进制才能正常插入。   
### 转换原理
字符串转成十六进制本质上是**ASCALL码转二进制，二进制转成十六进制**。   
1 ASCALL码转二进制，只是便于理解。实际上ASCALL码本身就是二进制的形式存储的，所以不需要进行额外的转换。   
2 二进制数要转换为十六进制，就是一个字符占一个字节，一个字节8位，以4位一段，分别转换为十六进制。    
例如字符‘0’的ASCALL码为48，   
48以二进制表示为0011 0000（4位一段，位数不足高位补0），    
转成十六进制就是 3 0
十六进制为0x开头，位数区间为0123456789ABCDEFG。  
因此字符串转十六进制就是取二进制的高四位和低四位分别转换，以16进制数字/字母进行表示。   
### 代码
```cpp
void string2hex(const string& str, string& str16)
{
	str16 = "0x";	//首先增加0x开头代表十六进制表示   
	static const char* hex = "0123456789ABCDEF";	
	for (auto c : str)
	{
		str16.push_back(hex[(c >> 4) & 0xf]);	//0xf二进制为 1111
		str16.push_back(hex[c & 0xf]);
	}
}
```
首先增加“0x”在开头代表为16进制表示。   
hex为16进制表示库，下面会从这个字符数组里寻找合适的16进制字符进行插入。   
在循环中，首先右移4位获取这个字符的高4位，与0xf进行与操作。   
> 0xf十六进制表示为f，二进制则表示为1111。   
   
获取的二进制数字，就是我们在hex中预留的十六进制字符。   
如果与操作后，得到10的话，hex中就正好对应A。   
随后对低4位进行相同的操作。   
这样，在一个循环中，我们就分别对一个字符的高四位和低四位进行了转化。获取了2位长度的16进制表示。   
### 总结
字符串转16进制，简单总结就是：   
一个字符的二进制地址分别以高四位低四位进行转换，得到两个16进制的地址表示。  