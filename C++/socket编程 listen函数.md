## socket编程 listen函数
```c
int listen(SOCKET sock, int backlog);    
```  
sock为需要进入监听状态的套接字，backlog为请求队列的最大长度（缓冲区长度）。   
所谓被动监听，是指当没有客户端请求时，套接字处于“睡眠”状态，只有当接收到客户端请求时，套接字才会被“唤醒”来响应请求。  
#### 请求队列 
当套接字正在处理客户端请求时，如果有新的请求进来，套接字是没法处理的，只能把它放进缓冲区，待当前请求处理完毕后，再从缓冲区中读取出来处理。如果不断有新的请求进来，它们就按照先后顺序在缓冲区中排队，直到缓冲区满。这个缓冲区，就称为**请求队列**（Request Queue）。   
#### 缓冲区
**缓冲区的长度**（能存放多少个客户端请求）可以通过 listen() 函数的 backlog 参数指定，但究竟为多少并没有什么标准，可以根据你的需求来定，并发量小的话可以是10或者20。   
如果将 backlog 的值设置为 SOMAXCONN，就由系统来决定请求队列长度，这个值一般比较大，可能是几百，或者更多。    
当请求队列满时，就不再接收新的请求，对于Linux，客户端会收到ECONNREFUSED错误，对于 Windows，客户端会收到WSAECONNREFUSED错误。    

注意：listen() 只是让套接字处于监听状态，并没有接收请求。接收请求需要使用 accept() 函数。   