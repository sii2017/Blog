## 如何改变文件所属与权限
鸟哥私房菜第六章相关小节总结。   
### 如何改变文件属性
这里的文件属性指的是，文件所属的用户和用户组。    
通常一个文件就两个权限所属，一是所属用户，二是所属用户组。   
有三个相关的命令，分别是chgrp，chown，chmod。   
#### chgrp命令
chgrp是change group的缩写，可想而知该命令是专门用来改变文件的**组所属**的。    
用法如下：chgrp [-R] newgroup filename/dirname   
其中-R可选，R意味着是recursive，即递归。如果选择了-R会以递归的形式将文件夹内所有的文件都一起改了。   
newgroup是新的组的名字，最后的则是需要更改的文件或目录。   
```
chgrp users install.log  //仅将install.log的组所属改为users组   
chgrp -R users dict	//将dict目录下的所有文件的组所属都改为users   
``` 
#### chown命令
chown命令是change own的简称，该命令不止可以改变用户所属，还可以连着组所属一起改。   
用法如下：chown [-R] username[:groupname] file/dict   
仍然有-R这个选项，以递归的方式进行更改。   
紧跟着新的user的参数。   
如果需要一起改groupname则可以用冒号分隔，同时写下groupname。  
最后一个参数是需要更改的文件或目录。   
```
chown sii text.txt  //将text.txt的用户所属改为sii用户   
chown sii:users text.txt	//将text.txt的用户所属改为sii用户，及组所属改为users组    
chown :users text.txt	//不改变用户所属，但是将text.txt的组所属改为users  
```  
除了冒号，单个的点.也可以用，但是由于有的用户名里夹杂着点，可以会让系统误判。所以冒号会好一些。   
### 如何改变文件权限
相关命令为chmod。   
权限的设置有两种，一种是以数字来设置，或者是以符号来设置。    
#### 以数字来设置文件权限
linux文件的基本权限就有9个，分别是owner、group、others三种身份各有自己的read、write、execute权限。   
其中我们使用各个数字来代表各个权限，各权限代表的数字分别如下：   
**r：4**    
**w：2**    
**x：1**    
举个例子，某个文件的权限是-rwxrwx---，则分数分别是：   
owner：rwx=4+2+1=7   
group：rwx=4+2+1=7   
others：---=0+0+0=0    
所以代表该文件权限的数字就是770。    
chmod的语法如下：    
chmod [-R] xyz 文件/目录    
以上xyz就是类似770的数字权限，而-R则是可选是否以递归形式进行变更权限。   
举个例子，如果我们要把一个叫text.txt的文件权限全部开启让所有人都可以访问，则输入命令：   
```
chmod 777 text.txt    
```   
如果要把除了owner以外的全部权限都关闭则是   
```
chmod 700 text.txt   
```   
#### 以符号来设置文件权限
如果觉得数字太复杂，也可以通过符号来设置权限。   
先记一下以下的内容  
代表身份的分别有四种：   
**u，g，o，a。分别代表user本用户，group用户组，others其他人以及all包含上述三种。**  
**+，-，=分别依次代表加入权限，减去权限和设置权限三种。**   
**r，w，x则分别依次代表读写执行三种权限。**   
根据之前的语法，实践一下。   
如果要把group和others的权限设置为可读和执行，user则是拥有所有的权限，那么如下命令：   
```
chmod u=rwx,go=rx text.txt   
```   
如果不知道文件原来的权限，只想简单的加权限或者减去权限，可以就用+和-号来实现。   
比如想给所有人都加上写入权限。   
```
chmod a+w text.txt   
```   
比如像给所有人都去掉写和执行权限。   
```
chmod a-xw text.txt   
```   
#### 注意
改变权限需要root账号的权限才行。关于如何获得root权限可以参考同目录下《su su -和sudo的区别》文章。   
### umask
umask命令用来指定，当前用户在新建文件或目录时候的权限默认值。   
但是值得注意的是，umask的**分数**指的是，该默认值需要减掉的权限，而不是该用户的实际默认值。   
该默认值一般以数字表达。   
比如普通用户的umask通常为0002。（与一般权限有关的是后3个数字）   
0002意味着普通用户在创建文件的情况下，others的权限被减去了2，也就是write属性。   
如果用户创建一个文件，该属性为-rw-rw-rw-，那么减去other的w就是：-rw-rw-r--。   
另外通常情况下，root用户的umask为0022。   
直接使用命令umask可以看到当前的的umask值。  
```
umask   
0022   
```   
有一个option参数为-S。这种情况下权限值会以字母表达出来。   
```
umask -S
u=rwx,g=rwx,o=rx   
```   
**值得注意的是当参数为-S的时候，显示出来的就不是“需要减去的值”了，而是实际创建文件的默认值。**   