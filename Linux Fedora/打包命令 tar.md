## 打包
在《解压缩 compress gzip bzip2》中展示了linux如何解压缩文件，但是他们都只是解压缩单独的文件。   
如果需要将一个文件夹或者将多个文件打包，则需要用到打包的命令tar。   
### tar命令
tar命令的使用比较复杂，有很多option选项。以下是一些常用的选项。  
-t，查看打包文件里的内容包含哪些文件名，主要用来查看文件名。   
-x，解压缩和解打包的命令，与bzip2中的-d相似。  
-j，通过bzip2的支持进行压缩/解压缩，此时文件名最好为\*.tar.bz2。   
-z，通过gzip的支持进行压缩/解压缩，此时文件名最好为\*.tar.gz。   
-v，在压缩/解压缩的过程中，将正在处理的文件名显示出来。  
-f filename，-f后面要接被处理的文件名。建议-f单独写一个参数。   
-P，保留备份数据的原本权限与属性。   
### 常用压缩命令
```c
tar -jcv -f filename.tar.bz2 需要压缩的文件夹或多个文件以空格隔开    
```   
jcv的意思就是，  
1 通过bzip2进行压缩，  
2 新建打包文件   
3 在压缩的过程中，显示正在处理的文件名。    
值得注意的是，filename.tar.bz2必须与-f连在一起，不要将其他参数隔在当中。   
#### -p参数
在压缩备份一些系统文件的时候，建议加上-p参数，这可以使压缩文件保留原本的权限设置。   
而如果没有加上-p参数，文件变成了压缩包，再解压回去以后，权限就变成用户自己的了。   
如果这样，当需要进行配置文件还原的时候，这些没有系统权限的备份文件是没有作用的。   
### 常用的查看压缩文件命令
```c
tar -jtv -f filename.tar.bz2   
```   
jtv的意思就是，   
1 使用bzip2的技术支持，   
2 显示文件名，   
3 查看打包文件的名字。   
### 常用解压缩命令
```c
tar -jxv -f filename.tar.bz2  
```  
即可以在当前目录下进行解压。   
```c
tar -jxv -f filename.tar.bz2  -C 欲解压的目录   
``` 
加上-C则可以在设想的位置进行解压。   
#### 解压缩某一个特定文件
有时候，只想解压缩某一个特定文件，而不希望把所有的文件都解开来。tar命令也是支持这个操作的。   
整个过程分两步走。   
1 找到该文件的名字，使用查看压缩文件的命令。   
```c
tar -jtv -f filename.tar.bz2   
```    
2 解压缩该特定文件，用的实际上也是解压缩的命令，只不过在压缩文件名 后，再加一个单独文件的名称。   
```c
tar -jxv -f filename.tar.bz2 file1   
```   
其中file1就是特定文件。   
值得注意的是，file1的名字不能乱写，一定要在“查看压缩文件命令”中显示的名字。   
### -P参数  
-P参数是比较特殊的，它的作用是保留绝对路径。   
如果我们在压缩的时候，使用的是相对路径，那没什么关系。   
如果我们在压缩的时候，使用的是绝对路径，即以/开始的，在不加-P的默认情况下，tar命令在保存的时候会帮我们把最开始的/删掉。   
原因如下，   
如果保留/，可能会造成误操作。比如本来备份了一个根目录下的文件，比如/etc。  
某一天想解压缩检查一下，由于绝对路径的缘故，直接将原来/etc给覆盖了。这会引发不小的问题。   
因此tar命令，在默认情况下，遇到绝对路径会把/根目录给删除。   
但是如果我们需要保留根目录的话，则可以使用-P参数。   
值得注意的是，在解压缩的时候，也需要加-P参数，才可以以绝对路径进行解压缩，不然，tar命令仍然会在解压缩的时候，“再次”删除根目录/。   
双重保险，足以显示其重要性。   
该参数需要谨慎使用。  
### 打包某目录，但是不想打包其中的某些文件
使用--exclude参数。    
```c
tar -jcv -f filename.tar.bz2 --exclude=/root/etc* --exclude=/root/system.tar.bz2 /etc /root   
```   
--exclude=后的内容是不包括的内容。   
最后两个目录则是打包的内容。   